<div>
    <button type="action" name="act_pagecharacter">Character</button>
    <button type="action" name="act_pagespells">Spells</button>
    <button type="action" name="act_pagejournal">Journal</button>
</div>
<input type='hidden' class='sheet-tabstoggle' name='attr_sheetTab' value='pagecharacter' />

<div class='sheet-page-character'>

    <div class="layout-4col">
        <!-- top charcter info -->
        <div class="layout-col">
            <div class="image-game-logo"></div>
        </div>
        <!-- middle left col -->
        <div class="layout-col">
            <div class="flex-row field-underline">
                <div class="input-wrap">
                    <label class="label">Name</label>
                    <input type="text" name="attr_character_name" />
                </div>
            </div>
            <div class="flex-row field-underline">
                <div class="input-wrap">
                    <label class="label">Race</label>
                    <input type="text" name="attr_race" />
                </div>
                <div class="input-wrap">
                    <label class="label">Gender</label>
                    <input type="text" name="attr_gender" />
                </div>
            </div>
        </div>
        <!-- middle right col -->
        <div class="layout-col">
            <div class="flex-row field-underline">
                <div class="input-wrap">
                    <label class="label">Class</label>
                    <input type="text" name="attr_class" />
                </div>
                <div class="input-wrap">
                    <label class="label">Adv. Class</label>
                    <input type="text" name="attr_advancedclass" />
                </div>
            </div>
            <div class="flex-row field-underline">
                <div class="input-wrap">
                    <label class="label">Multiclass</label>
                    <input type="text" name="attr_multiclass" />
                </div>
                <div class="input-wrap">
                    <label class="label">Alignment</label>
                    <input type="text" name="attr_alignment" />
                </div>
            </div>
        </div>
        <!-- right col -->
        <div class="layout-col">
            <div class="flex-row field-underline">
                <div class="input-wrap">
                    <label class="label">Experience</label>
                    <input type="text" name="attr_experience" />
                </div>
                <div class="input-wrap">
                    <label class="label">Level</label>
                    <input type="text" name="attr_characterlevel" />
                </div>
            </div>
        </div>
    </div>

    <!-- Lower section -->
    <div class="layout-3col">
        <div class="layout-col">
            <!-- Skills -->
            <div class="section-banner">
                <div class="section-banner-label">
                    Skills
                </div>
            </div>




            <!-- Skills and what they are based off -->
            <!--Acrobatics - Agility
            Alchemy - Intelligence
            Appraise - Intelligence
            Athelitcs - Strength
            Deception - Charisma
            Disable Device - Agility
            Drive - Wisdom
            Animal Handling - Wisdom
            Knowledge - Intelligence
            Knowledge - Intelligence
            Knowledge - Intelligence
            Knowledge - intelligence
            Medicine - Wisdom
            Perception - Wisdom
            Performance - Charisma
            Persuaison - Charisma
            Smithing - Intelligence
            Spellcraft - Wisdom
            Stealth - Agility
            Survival - Wisdom
            Passive Perception - 10+ Peception Skills
            -expandable list for notes-->

            <div class="flex-col-center section-skills">
                <div class="flex-col-center">
                    <div class="thermo-header">
                        <div>
                            <div class="tinytext">Score</div>
                        </div>
                        <div class="flex-row">
                            <div class="tinytext">1/2 Lvl</div>
                            <div class="tinytext">Ability</div>
                            <div class="tinytext">Trained</div>
                            <div class="tinytext">Focus</div>
                            <div class="tinytext">Bonus</div>
                        </div>
                    </div>
                    <!-- Acrobatics -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_acrobatics"
                                value="@{halflevel}+@{agility_mod}+@{acrobaticstrainedbonus}+@{acrobaticsfocusbonus}+@{acrobaticsbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{acrobatics}]]}} {{title=Acrobatics}} {{subtitle=@{conditionlabel}}}" name="roll_Acrobatics">Acrobatics</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_agility_mod" readonly="true">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_acrobaticstrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_acrobaticsfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_acrobaticsbonus" value="0">
                        </div>
                    </div>
                    <!-- alchemy -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_alchemy"
                                value="@{halflevel}+@{intelligence_mod}+@{alchemytrainedbonus}+@{alchemyfocusbonus}+@{alchemybonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{alchemy}]]}} {{title=Alchemy}} {{subtitle=@{conditionlabel}}}" name="roll_Alchemy">Alchemy</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_intelligence_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_alchemytrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_alchemyfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_alchemybonus" value="0">
                        </div>
                    </div>
                    <!-- appraise -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_appraise"
                                value="@{halflevel}+@{intelligence_mod}+@{appraisetrainedbonus}+@{appraisefocusbonus}+@{appraisebonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{appraise}]]}} {{title=Appraise}} {{subtitle=@{conditionlabel}}}" name="roll_Appraise">Appraise</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_intelligence_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_appraisetrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_appraisefocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_appraisebonus" value="0">
                        </div>
                    </div>
                    <!-- athelitcs -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_athelitcs"
                                value="@{halflevel}+@{strength_mod}+@{athelitcstrainedbonus}+@{athelitcsfocusbonus}+@{athelitcsbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{athelitcs}]]}} {{title=Athelitcs}} {{subtitle=@{conditionlabel}}}" name="roll_Athelitcs">Athelitcs</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_strength_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_athelitcstrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_athelitcsfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_athelitcsbonus" value="0">
                        </div>
                    </div>
                    <!-- deception -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_deception"
                                value="@{halflevel}+@{charisma_mod}+@{deceptiontrainedbonus}+@{deceptionfocusbonus}+@{deceptionbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{deception}]]}} {{title=Deception}} {{subtitle=@{conditionlabel}}}" name="roll_Deception">Deception</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_charisma_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_deceptiontrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_deceptionfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_deceptionbonus" value="0">
                        </div>
                    </div>
                    <!-- disabledevice -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_disabledevice"
                                value="@{halflevel}+@{agility_mod}+@{disabledevicetrainedbonus}+@{disabledevicefocusbonus}+@{disabledevicebonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div style="font-size: 0.9em;">
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{disabledevice}]]}} {{title=Disable Device}} {{subtitle=@{conditionlabel}}}" name="roll_DisableDevice">Disable Device</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_agility_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_disabledevicetrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_disabledevicefocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_disabledevicebonus" value="0">
                        </div>
                    </div>
                    <!-- drive -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_drive"
                                value="@{halflevel}+@{wisdom_mod}+@{drivetrainedbonus}+@{drivefocusbonus}+@{drivebonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{drive}]]}} {{title=Drive}} {{subtitle=@{conditionlabel}}}" name="roll_Drive">Drive</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_wisdom_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_drivetrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_drivefocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_drivebonus" value="0">
                        </div>
                    </div>
                    <!-- animalhandling -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_animalhandling"
                                value="@{halflevel}+@{wisdom_mod}+@{animalhandlingtrainedbonus}+@{animalhandlingfocusbonus}+@{animalhandlingbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div style="font-size: 0.9em;">
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{animalhandling}]]}} {{title=Animal Handling}} {{subtitle=@{conditionlabel}}}" name="roll_AnimalHandling">Animal Handling</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_wisdom_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_animalhandlingtrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_animalhandlingfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_animalhandlingbonus" value="0">
                        </div>
                    </div>
                    <!-- knowledge1 -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_knowledge1"
                                value="@{halflevel}+@{intelligence_mod}+@{knowledge1trainedbonus}+@{knowledge1focusbonus}+@{knowledge1bonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <input name="attr_knowledge1name" placeholder="Knowledge"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_intelligence_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_knowledge1trainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_knowledge1focusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_knowledge1bonus" value="0">
                        </div>
                    </div>
                    <!-- knowledge2 -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_knowledge2"
                                value="@{halflevel}+@{intelligence_mod}+@{knowledge2trainedbonus}+@{knowledge2focusbonus}+@{knowledge2bonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <input name="attr_knowledge2name" placeholder="Knowledge"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_intelligence_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_knowledge2trainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_knowledge2focusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_knowledge2bonus" value="0">
                        </div>
                    </div>
                    <!-- knowledge3 -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_knowledge3"
                                value="@{halflevel}+@{intelligence_mod}+@{knowledge3trainedbonus}+@{knowledge3focusbonus}+@{knowledge3bonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <input name="attr_knowledge3name" placeholder="Knowledge"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_intelligence_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_knowledge3trainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_knowledge3focusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_knowledge3bonus" value="0">
                        </div>
                    </div>
                    <!-- knowledge4 -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_knowledge4"
                                value="@{halflevel}+@{intelligence_mod}+@{knowledge4trainedbonus}+@{knowledge4focusbonus}+@{knowledge4bonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <input name="attr_knowledge4name" placeholder="Knowledge"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_intelligence_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_knowledge4trainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_knowledge4focusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_knowledge4bonus" value="0">
                        </div>
                    </div>
                    <!-- medicine -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_medicine"
                                value="@{halflevel}+@{wisdom_mod}+@{medicinetrainedbonus}+@{medicinefocusbonus}+@{medicinebonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{medicine}]]}} {{title=Medicine}} {{subtitle=@{conditionlabel}}}" name="roll_Medicine">Medicine</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_wisdom_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_medicinetrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_medicinefocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_medicinebonus" value="0">
                        </div>
                    </div>
                    <!-- perception -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_perception"
                                value="@{halflevel}+@{wisdom_mod}+@{perceptiontrainedbonus}+@{perceptionfocusbonus}+@{perceptionbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{perception}]]}} {{title=Perception}} {{subtitle=@{conditionlabel}}}" name="roll_Perception">Perception</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_wisdom_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_perceptiontrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_perceptionfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_perceptionbonus" value="0">
                        </div>
                    </div>
                    <!-- performance -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_performance"
                                value="@{halflevel}+@{charisma_mod}+@{performancetrainedbonus}+@{performancefocusbonus}+@{performancebonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <input name="attr_performancename" placeholder="Perform"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_charisma_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_performancetrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_performancefocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_performancebonus" value="0">
                        </div>
                    </div>
                    <!-- persuasion -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_persuasion"
                                value="@{halflevel}+@{charisma_mod}+@{persuasiontrainedbonus}+@{persuasionfocusbonus}+@{persuasionbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{persuasion}]]}} {{title=Persuaison}} {{subtitle=@{conditionlabel}}}" name="roll_Persuaison">Persuaison</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_charisma_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_persuasiontrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_persuasionfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_persuasionbonus" value="0">
                        </div>
                    </div>
                    <!-- smithing -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_smithing"
                                value="@{halflevel}+@{intelligence_mod}+@{smithingtrainedbonus}+@{smithingfocusbonus}+@{smithingbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{smithing}]]}} {{title=Smithing}} {{subtitle=@{conditionlabel}}}" name="roll_Smithing">Smithing</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_intelligence_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_smithingtrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_smithingfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_smithingbonus" value="0">
                        </div>
                    </div>
                    <!-- spellcraft -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_spellcraft"
                                value="@{halflevel}+@{wisdom_mod}+@{spellcrafttrainedbonus}+@{spellcraftfocusbonus}+@{spellcraftbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{spellcraft}]]}} {{title=Spellcraft}} {{subtitle=@{conditionlabel}}}" name="roll_Spellcraft">Spellcraft</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_wisdom_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_spellcrafttrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_spellcraftfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_spellcraftbonus" value="0">
                        </div>
                    </div>
                    <!-- stealth -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_stealth"
                                value="@{halflevel}+@{agility_mod}+@{stealthtrainedbonus}+@{stealthfocusbonus}+@{stealthbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{stealth}]]}} {{title=Stealth}} {{subtitle=@{conditionlabel}}}" name="roll_Stealth">Stealth</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_agility_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_stealthtrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_stealthfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_stealthbonus" value="0">
                        </div>
                    </div>
                    <!-- survival -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_survival"
                                value="@{halflevel}+@{wisdom_mod}+@{survivaltrainedbonus}+@{survivalfocusbonus}+@{survivalbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{condition}+@{survival}]]}} {{title=Survival}} {{subtitle=@{conditionlabel}}}" name="roll_Survival">Survival</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_wisdom_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_survivaltrainedbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_survivalfocusbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_survivalbonus" value="0">
                        </div>
                    </div>
                    <!-- passiveperception -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_passiveperception"
                                value="@{perception}+@{passiveperceptionbasebonus}+@{passiveperceptionbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div style="font-size: 0.7em;">
                                <button type="roll" value="&{template:simple} {{roll=[[@{passiveperception}]]}} {{title=Passive Perception}} {{subtitle=@{conditionlabel}}}" name="roll_PassivePerception">Passive Perception</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_perception" readonly="true">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_passiveperceptionbasebonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_passiveperceptionbonus" value="0">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- left col -->
        <div class="layout-col">
            <!-- HP, Mana, Misc -->
            <div class="section-misc-center">
                <div class="flex-row">
                    <div class="stat-stack">
                        <div class="label">
                            Hero Points
                        </div>
                        <div class="icon icon-border-heropoints">
                            <input type="text" name="attr_heropoints" value="0"/>
                        </div>
                    </div>
                    <div class="stat-stack">
                        <div class="label">
                            Damage Reduction
                        </div>
                        <div class="icon icon-border-damagereduction">
                            <input type="text" name="attr_damagereduction" value="0"/>
                        </div>
                    </div>
                    <div class="stat-stack">
                        <div class="label">
                            Base Attack Bonus
                        </div>
                        <div class="icon icon-border-baseattackbonus">
                            <input type="text" name="attr_baseatttackbonus" value="0"/>
                        </div>
                    </div>
                </div>
            </div>

            <!-- hp and mana-->
            <div class="section-hp-mana">
                <div class="flex-row">
                    <div class="flex-row stat-stack">
                        <div class="icon icon-border-hitpoints">
                            <input type="text" name="attr_hitpoints" value="0"/>
                        </div>
                        <div class="group-right">
                            <div class="label">
                                Hit Points
                            </div>
                            <input type="text" name="attr_hitpointscurrent" value="0" />
                        </div>
                    </div>
                    <div class="flex-row stat-stack">
                        <div class="icon icon-border-mana">
                            <input type="text" name="attr_mana" value="0" />
                        </div>
                        <div class="group-right">
                            <div class="label">
                                Mana
                            </div>
                            <input type="text" name="attr_manacurrent" value="0" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex-col-center">
                <div class="flex-col-center">
                    <div class="thermo-header">
                        <div>
                            <div class="tinytext">Score</div>
                        </div>
                        <div class="flex-row">
                            <div class="tinytext">1/2 Lvl</div>
                            <div class="tinytext">Agility</div>
                            <div class="tinytext">Feats</div>
                            <div class="tinytext">Bonus</div>
                        </div>
                    </div>
                    <!-- Initiative -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_initiative"
                                value="@{halflevel}+@{agility_mod}+@{initiativefeatbonus}+@{initiativebonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>
                                <button type="roll" value="&{template:simple} {{roll=[[1d20+@{initiative}+@{condition} &{tracker}]]}} {{title=Initiative}}" name="roll_Initiative">Initiative</button>
                            </div>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_halflevel" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input name="attr_agility_mod" readonly="true"/>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_initiativefeatbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_initiativebonus" value="0">
                        </div>
                    </div>
                    <div class="thermo-header">
                        <div>
                            <div class="tinytext">Score</div>
                        </div>
                        <div class="flex-row">
                            <div class="tinytext">Base</div>
                            <div class="tinytext">Feats</div>
                            <div class="tinytext">Bonus</div>
                            <div class="tinytext">Penalty</div>
                        </div>
                    </div>
                    <!-- Speed -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_speed"
                                value="@{speedbase}+@{speedfeatsbonus}+@{speedbonus}+@{speedpenaltybonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>Speed</div>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_speedbase" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_speedfeatsbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_speedbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_speedpenaltybonus" value="0">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Attacks -->
            <div class="section-banner">
                <div class="section-banner-label">
                    Attacks
                </div>
            </div>
            <div class="flex-col-center">
                <div>
                    <!-- attacks repeating with add modify buttons -->
                    <fieldset class="repeating_attacks">
                        <div class="section-attacks">
                            <div class="input-wrap grid-one">
                                <label class="label">Weapon</label>
                                <input type="text" name="attr_attackname" />
                            </div>
                            <div class="input-wrap grid-two">
                                <label class="label">Type</label>
                                <input type="text" name="attr_attacktype" />
                            </div>
                            <div class="input-wrap grid-three">
                                <label class="label">Range</label>
                                <input type="text" name="attr_attackrange" />
                            </div>
                            <div class="input-wrap grid-four">
                                <label class="label">Attack Bonus</label>
                                <input type="text" name="attr_attackbonus" />
                            </div>
                            <div class="input-wrap grid-five">
                                <label class="label">Damage</label>
                                <input type="text" name="attr_attackdamage" />
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <!-- Inventory -->
            <div class="section-banner">
                <div class="section-banner-label">
                    Inventory
                </div>
            </div>
            <div class="section-border">
                <div class="section-inventory">
                    <div class="flex-row inventory-header">
                        <div class="label inventory-quantity">#</div>
                        <div class="label inventory-name">Item Name</div>
                        <div class="label inventory-bulk">Bulk</div>
                    </div>
                    <fieldset class="repeating_inventory">
                        <div class="flex-row inventory-line">
                            <div><input type="text" name="attr_itemquantity"/></div>
                            <div><input type="text" name="attr_itemname" /></div>
                            <div><input type="text" name="attr_itembulk"/></div>
                        </div>
                    </fieldset>
                    <div class="flex-row inventory-total">
                        <div>Total Bulk</div>
                        <span type="text" name="attr_bulktotal" value="0">
                    </div>
                    <div class="flex-row inventory-maximumbulk">
                        <div>Maximum Bulk</div>
                        <div class="flex-col">
                            <span class="tinytext">Strength</span>
                            <span class="border inventory-maxbulkinput" type="text" name="attr_strength" disabled="true">
                        </div>
                        <div class="flex-col">
                            <span class="tinytext">Bonus</span>
                            <input class="border inventory-maxbulkinput" type="text" name="attr_maximumbulkbonus"
                                value="0">
                        </div>
                        <div>
                            <input class="border inventory-maxbulkinput" type="text" name="attr_maximumbulk"
                                value="@{strength} + @{maximumbulkbonus}" disabled>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-banner">
                <div class="section-banner-label">
                    Ability Scores
                </div>
            </div>
            <div class="flex-col-center">
                <!-- Strength -->
                <div class="thermo">
                    <div class="thermo-start">
                        <input type="text" name="attr_strength" value="0">
                    </div>
                    <div class="thermo-label">
                        <div>Strength</div>
                    </div>
                    <div class="thermo-end">
                        <input name="attr_strength_mod" readonly="true"/>
                    </div>
                </div>
                <!-- Vitality -->
                <div class="thermo">
                    <div class="thermo-start">
                        <input type="text" name="attr_vitality" value="0">
                    </div>
                    <div class="thermo-label">
                        <div>Vitality</div>
                    </div>
                    <div class="thermo-end">
                        <input name="attr_vitality_mod" readonly="true"/>
                    </div>
                </div>
                <!-- Agility -->
                <div class="thermo">
                    <div class="thermo-start">
                        <input type="text" name="attr_agility" value="0">
                    </div>
                    <div class="thermo-label">
                        <div>Agility</div>
                    </div>
                    <div class="thermo-end">
                        <input name="attr_agility_mod" readonly="true"/>
                    </div>
                </div>
                <!-- Intelligence -->
                <div class="thermo">
                    <div class="thermo-start">
                        <input type="text" name="attr_intelligence" value="0">
                    </div>
                    <div class="thermo-label">
                        <div>Intelligence</div>
                    </div>
                    <div class="thermo-end">
                        <input name="attr_intelligence_mod" readonly="true"/>
                    </div>
                </div>
                <!-- Wisdom -->
                <div class="thermo">
                    <div class="thermo-start">
                        <input type="text" name="attr_wisdom" value="0">
                    </div>
                    <div class="thermo-label">
                        <div>Wisdom</div>
                    </div>
                    <div class="thermo-end">
                        <input name="attr_wisdom_mod" readonly="true"/>
                    </div>
                </div>
                <!-- Charisma -->
                <div class="thermo">
                    <div class="thermo-start">
                        <input type="text" name="attr_charisma" value="0">
                    </div>
                    <div class="thermo-label">
                        <div>Charisma</div>
                    </div>
                    <div class="thermo-end">
                        <input name="attr_charisma_mod" readonly="true"/>
                    </div>
                </div>
            </div>

        </div>
        <!-- right middle col -->
        <div class="layout-col">
            <!-- Defences -->
            <div class="section-banner">
                <div class="section-banner-label">
                    Defences
                </div>
            </div>
            <div class="flex-col-center">
                <div class="flex-col-center">
                    <div class="thermo-header">
                        <div>
                            <div class="tinytext">Score</div>
                        </div>
                        <div class="flex-row">
                            <div class="tinytext">Level</div>
                            <div class="tinytext">Ability</div>
                            <div class="tinytext">Class</div>
                            <div class="tinytext">Feats</div>
                            <div class="tinytext">Bonus</div>
                        </div>
                    </div>
                    <!-- Fortitude -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_fortitude"
                                value="10+@{characterlevel}+@{vitality_mod}+@{fortitudeclassbonus}+@{fortitudefeatbonus}+@{fortitudebonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>Fortitude</div>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_characterlevel" readonly="true">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_vitality_mod" readonly="true">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_fortitudeclassbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_fortitudefeatbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_fortitudebonus" value="0">
                        </div>
                    </div>
                    <!-- Reflexes -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_reflexes"
                                value="10+@{characterlevel}+@{agility_mod}+@{reflexesclassbonus}+@{reflexesfeatbonus}+@{reflexesbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>Reflexes</div>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_characterlevel" readonly="true">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_agility_mod" readonly="true">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_reflexesclassbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_reflexesfeatbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_reflexesbonus" value="0">
                        </div>
                    </div>
                    <!-- Willpower -->
                    <div class="thermo">
                        <div class="thermo-start">
                            <input type="text" name="attr_willpower"
                                value="10+@{characterlevel}+@{wisdom_mod}+@{willpowerclassbonus}+@{willpowerfeatbonus}+@{willpowerbonus}"
                                disabled="true">
                        </div>
                        <div class="thermo-label">
                            <div>Willpower</div>
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_characterlevel" readonly="true">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_wisdom_mod" readonly="true">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_willpowerclassbonus" value="0">
                        </div>
                        <div class="thermo-node">
                            <input type="text" name="attr_willpowerfeatbonus" value="0">
                        </div>
                        <div class="thermo-end">
                            <input type="text" name="attr_willpowerbonus" value="0">
                        </div>
                    </div>
                    <div>
                        <!-- Damage Threshold -->
                        <div class="thermo-header">
                            <div>
                                <div class="tinytext">Score</div>
                            </div>
                            <div class="flex-row">
                                <div class="tinytext">Fortitude</div>
                                <div class="tinytext">Feats</div>
                                <div class="tinytext">Bonus</div>
                            </div>
                        </div>
                        <div class="thermo">
                            <div class="thermo-start">
                                <input type="text" name="attr_damagethreshold"
                                    value="@{fortitude}+@{damagethresholdfeatsbonus}+@{damagethresholdbonus}"
                                    disabled="true">
                            </div>
                            <div class="thermo-label">
                                <div style="font-size: 0.8em;">Damage Threshold</div>
                            </div>
                            <div class="thermo-node">
                                <input type="text" name="attr_fortitude" readonly="true">
                            </div>
                            <div class="thermo-node">
                                <input type="text" name="attr_damagethresholdfeatsbonus" value="0">
                            </div>
                            <div class="thermo-end">
                                <input type="text" name="attr_damagethresholdbonus" value="0">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Condition -->
            <div class="section-condition">
                <div class="section-banner">
                    <div class="section-banner-label">
                        Condition
                    </div>
                </div>
                <div class="section-border">
                    <div class="flex-col-center">
                        <input class="conditionlabel" type="text" name="attr_conditionlabel" value="Normal" readonly="true"/>
                        <div class="flex-row condition-radio-container">
                            <div class="flex-col-center">
                                <input type="radio" name="attr_condition" value="0" checked />
                                <span>0</span>
                            </div>
                            <div class="flex-col-center">
                                <input type="radio" name="attr_condition" value="-1" />
                                <span>-1</span>
                            </div>
                            <div class="flex-col-center">
                                <input type="radio" name="attr_condition" value="-2" />
                                <span>-2</span>
                            </div>
                            <div class="flex-col-center">
                                <input type="radio" name="attr_condition" value="-5" />
                                <span>-5</span>
                            </div>
                            <div class="flex-col-center">
                                <input type="radio" name="attr_condition" value="-10" />
                                <span>-10</span>
                            </div>
                            <div class="flex-col-center">
                                <input type="radio" name="attr_condition" value="-999" />
                                <span>Unconcious</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Feats -->
            <div class="section-feats">
                <div class="section-banner">
                    <div class="section-banner-label">
                        Feats & Talents
                    </div>
                </div>
                <div class="section-border">
                    <fieldset class="repeating_feats">
                        <div class="feat-container">
                            <div class="toggle-container">
                                <input type="checkbox" class="toggle-swap right-far" name="attr_featedit"/>
                                <label class="toggle-label-wrapper right-far edit-icon">
                                    <input type="checkbox" class="toggle-swap" name="attr_featedit"/>
                                </label>
                                <div class="toggle-container toggle-swap-a">
                                    <input type="checkbox" class="toggle-hide" name="attr_featdescriptionhide"/>
                                    <label class="toggle-label-wrapper right-middle show-icon">
                                        <input type="checkbox" class="toggle-hide" name="attr_featdescriptionhide"/>
                                    </label>
                                    <span class="feat-title" name="attr_featname"></span>
                                    <div class="feat-subtitle-container">
                                        <span class="feat-subtitle" name="attr_feattype"></span><span class="feat-subtitle">: </span><span class="feat-subtitle" name="attr_featsource"></span>
                                    </div>
                                    <div class="toggle-body">
                                        <span class="feat-desc" name="attr_featdescription"></span>
                                    </div>
                                </div>
                                <div class="toggle-swap-b feat-editing">
                                    <div class="feat-row-input">
                                        <span>Name: </span>
                                        <input type="text" name="attr_featname" />
                                    </div>
                                    <div class="feat-row-input">
                                        <span>Type: </span>
                                        <select name="attr_feattype">
                                            <option value="Feat" selected>Feat</option>
                                            <option value="Talent">Talent</option>
                                            <option value="Class">Class</option>
                                            <option value="Racial">Racial</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    <div class="feat-row-input">
                                        <span>Source: </span>
                                        <input type="text" name="attr_featsource" />
                                    </div>
                                    <div class="toggle-body">
                                        <textarea class="feat-desc" type="text" name="attr_featdescription"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>
</div> <!-- end character page -->
<div class='sheet-page-spells'>
    <h2>Spells</h2>
    <span>Spells</span>
</div><!-- end spell page -->
<div class='sheet-page-journal'>
    <h2>Journal/Notes</h2>
    <span>Journal/Notes Stuff Goes here</span>
</div><!-- end journal page -->


<input type="hidden" name="attr_halflevel" value="0" readonly="true"> 

<input type="hidden" name="attr_strength_mod" value="0" readonly="true">
<input type="hidden" name="attr_agility_mod" value="0" readonly="true">
<input type="hidden" name="attr_vitality_mod" value="0" readonly="true">
<input type="hidden" name="attr_intelligence_mod" value="0" readonly="true">
<input type="hidden" name="attr_wisdom_mod" value="0" readonly="true">
<input type="hidden" name="attr_charisma_mod" value="0" readonly="true">




<!-- custom roll template -->
<rolltemplate class="sheet-rolltemplate-simple">
    <div class="container sheet-color-{{color}}">
        <div class="roll">
            {{#roll}}<div class="title">{{roll}}</div>{{/roll}}
        </div>
        <div class="header">
            {{#title}}<div class="title">{{title}}</div>{{/title}}
            {{#subtitle}}<div class="subtitle">{{subtitle}}</div>{{/subtitle}}
        </div>
        <div class="content">
            {{#description}}<div class="description">{{description}}</div>{{/description}}
        </div>
    </div>
</rolltemplate>
<!-- end custom roll template -->



<script type="text/worker"> //type="text/worker"

    console.log('====== Last Arc Worker started =======');

    //button pages
    const buttonlist = ["pagecharacter","pagejournal","pagespells"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });

    //update ability mods on ability update
    ['strength','agility','vitality','intelligence','wisdom','charisma'].forEach(attr => {
        on('change:' + attr, function() { 
            update_mod(attr);
            (attr === "strength") ? update_weight() : false;
        });
    });

    var update_mod = function (attr) {
        getAttrs([attr], function(v) {
            var finalattr = v[attr] && isNaN(v[attr]) === false ? Math.floor((parseInt(v[attr], 10) - 10) / 2) : 0;
            var update = {};
            update[attr + "_mod"] = finalattr;
            setAttrs(update);
        });
    };

    //update characterlevel/halflevel
    on('change:characterlevel', function() {
        getAttrs(["characterlevel"], function(values) {
            var update = {};
            update["halflevel"] = Math.floor(values.characterlevel / 2);
            setAttrs(update);
        });
    });

    //update character Condition
    on('change:condition', function() { 
        getAttrs(['condition'], function(v) {
            var update = {};
            var cond = v['condition'];
            console.log(cond);
            if(cond >= 0)
                update["conditionlabel"] = 'Normal';
            else if(cond >= -1)
                update["conditionlabel"] = 'Hurt';
            else if(cond >= -2)
                update["conditionlabel"] = 'Wounded';
            else if(cond >= -5)
                update["conditionlabel"] = 'Injured';
            else if(cond >= -10)
                update["conditionlabel"] = 'Crippled';
            else if(cond >= -999)
                update["conditionlabel"] = 'Unconcious';
            setAttrs(update);
        });
    });

    on("change:repeating_inventory:itemquantity", function() {
		update_weight();
	});

    on("change:repeating_inventory:itembulk", function() {
		update_weight();
	});

    var update_weight = function() {
        let update = {};
        let btotal = 0;
        let weight_attrs = [];
        getSectionIDs('repeating_inventory', (idarray) => {
            _.each(idarray, (currentID, i) => {
                weight_attrs.push(`repeating_inventory_${currentID}_itembulk`);
                weight_attrs.push(`repeating_inventory_${currentID}_itemquantity`);
            });
            getAttrs(weight_attrs, (v) => {
                _.each(idarray, (currentID, i) => {
                    if (v[`repeating_inventory_${currentID}_itembulk`] && isNaN(parseInt(v[`repeating_inventory_${currentID}_itembulk`], 10)) === false) {
                        count = v[`repeating_inventory_${currentID}_itemquantity`] && isNaN(parseFloat(v[`repeating_inventory_${currentID}_itemquantity`])) === false ? parseFloat(v[`repeating_inventory_${currentID}_itemquantity`]) : 1;
                        btotal = btotal + (parseFloat(v[`repeating_inventory_${currentID}_itembulk`]) * count);
                    }
                });

                update["bulktotal"] = btotal;

                setAttrs(update, {silent: true});
            });
        });
    };

</script>