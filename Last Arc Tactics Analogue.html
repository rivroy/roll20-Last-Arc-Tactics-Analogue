<div class="3colrow">
    <!-- top charcter info -->
    <!-- left col -->
    <div class="sheet-col">
        <div class="sheet-flex-row sheet-field-underline">
            <div class="sheet-input-wrap">
                <label class="sheet-label">Name</label>
                <input type="text" name="attr_character_name" />
            </div>
        </div>
        <div class="sheet-flex-row sheet-field-underline">
            <div class="sheet-input-wrap">
                <label class="sheet-label">Race</label>
                <input type="text" name="attr_race" />
            </div>
            <div class="sheet-input-wrap">
                <label class="sheet-label">Gender</label>
                <input type="text" name="attr_gender" />
            </div>
        </div>
    </div>
     <!-- middle col -->
    <div class="sheet-col">
        <div class="sheet-flex-row sheet-field-underline">
            <div class="sheet-input-wrap">
                <label class="sheet-label">Class</label>
                <input type="text" name="attr_class" />
            </div>
            <div class="sheet-input-wrap">
                <label class="sheet-label">Adv. Class</label>
                <input type="text" name="attr_advancedclass" />
            </div>
        </div>
        <div class="sheet-flex-row sheet-field-underline">
            <div class="sheet-input-wrap">
                <label class="sheet-label">Multiclass</label>
                <input type="text" name="attr_multiclass" />
            </div>
            <div class="sheet-input-wrap">
                <label class="sheet-label">Alignment</label>
                <input type="text" name="attr_alignment" />
            </div>
        </div>
	</div>
    <!-- right col -->
    <div class="sheet-col">
        <div class="sheet-flex-row sheet-field-underline">
            <div class="sheet-input-wrap">
                <label class="sheet-label">Experience</label>
                <input type="text" name="attr_experience" />
            </div>
            <div class="sheet-input-wrap">
                <label class="sheet-label">Next Level</label>
                <input type="text" name="attr_nextlevel" />
            </div>
        </div>
	</div>
</div>

<!-- Lower section -->
<div class="3colrow">
    <!-- left col -->
	<div class="col">
		<div class="sheet-section-banner">
            <div class="sheet-section-banner-label">
                Ability Scores
            </div>
        </div>
        <div style="margin: 0 10px">
            <!-- Strength -->
            <div class="sheet-thermo">
                <div class="sheet-thermo-node-big">
                    <input type="text" name='attr_strength' class='sheet-short' placeholder='0'>
                </div>
                <div class="sheet-thermo-background">
                    <div class="sheet-thermo-label">
                        <div>Strength</div>
                    </div>
                </div>
                <div class="sheet-thermo-node-medium">
                    <span name="attr_strength_mod" value="(@{strength} + 5)" disabled></span>
                </div>
            </div>
            <!-- Vitality -->
            <div class="sheet-thermo">
                <div class="sheet-thermo-node-big">
                    <input type="text" name='attr_vitality' class='sheet-short' placeholder='0'>
                </div>
                <div class="sheet-thermo-background">
                    <div class="sheet-thermo-label">
                        <div>Vitality</div>
                    </div>
                </div>
                <div class="sheet-thermo-node-medium">
                    <span name="attr_strength_mod" value="(@{strength} + 5)" disabled></span>
                </div>
            </div>
            <!-- Agility -->
            <div class="sheet-thermo">
                <div class="sheet-thermo-node-big">
                    <input type="text" name='attr_agility' class='sheet-short' placeholder='0'>
                </div>
                <div class="sheet-thermo-background">
                    <div class="sheet-thermo-label">
                        <div>Agility</div>
                    </div>
                </div>
                <div class="sheet-thermo-node-medium">
                    <span name="attr_strength_mod" value="(@{strength} + 5)" disabled></span>
                </div>
            </div>
            <!-- Intelligence -->
            <div class="sheet-thermo">
                <div class="sheet-thermo-node-big">
                    <input type="text" name='attr_intelligence' class='sheet-short' placeholder='0'>
                </div>
                <div class="sheet-thermo-background">
                    <div class="sheet-thermo-label">
                        <div>Intelligence</div>
                    </div>
                </div>
                <div class="sheet-thermo-node-medium">
                    <span name="attr_strength_mod" value="(@{strength} + 5)" disabled></span>
                </div>
            </div>
            <!-- Wisdom -->
            <div class="sheet-thermo">
                <div class="sheet-thermo-node-big">
                    <input type="text" name='attr_wisdom' class='sheet-short' placeholder='0'>
                </div>
                <div class="sheet-thermo-background">
                    <div class="sheet-thermo-label">
                        <div>Wisdom</div>
                    </div>
                </div>
                <div class="sheet-thermo-node-medium">
                    <span name="attr_strength_mod" value="(@{strength} + 5)" disabled></span>
                </div>
            </div>
            <!-- Charisma -->
            <div class="sheet-thermo">
                <div class="sheet-thermo-node-big">
                    <input type="text" name='attr_charisma' class='sheet-short' placeholder='0'>
                </div>
                <div class="sheet-thermo-background">
                    <div class="sheet-thermo-label">
                        <div>Strength</div>
                    </div>
                </div>
                <div class="sheet-thermo-node-medium">
                    <span name="attr_strength_mod" value="(@{strength} + 5)" disabled></span>
                </div>
            </div>
        </div>

        <hr />
        
        <!-- Skills -->
        <div class="sheet-section-banner">
            <div class="sheet-section-banner-label">
                Skills
            </div>
        </div>
        

	</div>
    <!-- middle col -->
	<div class="col">
        <!-- HP, Mana, Misc -->
        <div class="sheet-section-misc-center">
            <div class="sheet-flex-row">
                <div class="sheet-stat-stack">
                    <div class="sheet-label">
                        Hero Points
                    </div>
                    <div class="sheet-icon sheet-icon-border-heropoints">
                        <input type="text" name="attr_heropoints" />
                    </div>
                </div>
                <div class="sheet-stat-stack">
                    <div class="sheet-label">
                        Damage Reduction
                    </div>
                    <div class="sheet-icon sheet-icon-border-damagereduction">
                        <input type="text" name="attr_damagereduction" />
                    </div>
                </div>
                <div class="sheet-stat-stack">
                    <div class="sheet-label">
                        Base Attack Bonus
                    </div>
                    <div class="sheet-icon sheet-icon-border-baseattackbonus">
                        <input type="text" name="attr_baseatttackbonus" />
                    </div>
                </div>
            </div>
        </div>

        <!-- hp and mana-->
        <div class="sheet-section-hp-mana">
            <div class="sheet-flex-row">
                <div class="sheet-flex-row sheet-stat-stack">
                    <div class="sheet-icon sheet-icon-border-hitpoints">
                        <input type="text" name="attr_hitpoints" />
                    </div>
                    <div class="sheet-group-right">
                        <div class="sheet-label">
                            Hit Points
                        </div>
                        <input type="text" name="attr_hitpointscurrent" />
                    </div>
                </div>
                <div class="sheet-flex-row sheet-stat-stack">
                    <div class="sheet-icon sheet-icon-border-mana">
                        <input type="text" name="attr_mana" />
                    </div>
                    <div class="sheet-group-right">
                        <div class="sheet-label">
                            Mana
                        </div>
                        <input type="text" name="attr_manacurrent" />
                    </div>
                </div>
            </div>
        </div>

		<!-- Attacks -->
		<div class="sheet-section-banner">
            <div class="sheet-section-banner-label">
                Attacks
            </div>
        </div>
        <!-- attacks repeating with add modify buttons -->
        <fieldset class="repeating_attacks">
            <div class="sheet-section-attacks">
                <div class="sheet-input-wrap sheet-grid-one">
                    <label class="sheet-label">Weapon</label>
                    <input type="text" name="attr_attackname" />
                </div>
                <div class="sheet-input-wrap sheet-grid-two">
                    <label class="sheet-label">Type</label>
                    <input type="text" name="attr_attacktype" />
                </div>
                <div class="sheet-input-wrap sheet-grid-three">
                    <label class="sheet-label">Range</label>
                    <input type="text" name="attr_attackrange" />
                </div>
                <div class="sheet-input-wrap sheet-grid-four">
                    <label class="sheet-label">Attack Bonus</label>
                    <input type="text" name="attr_attackbonus" />
                </div>
                <div class="sheet-input-wrap sheet-grid-five">
                    <label class="sheet-label">Damage</label>
                    <input type="text" name="attr_attackdamage" />
                </div>
            </div>
        </fieldset>
        <!-- Inventory -->
		<div class="sheet-section-banner">
            <div class="sheet-section-banner-label">
                Inventory
            </div>
        </div>
        <div class="sheet-section-border">
            <div class="sheet-section-inventory">
                <div class="sheet-flex-row sheet-inventory-header">
                    <div class="sheet-label sheet-inventory-quantity">#</div>
                    <div class="sheet-label sheet-inventory-name">Item Name</div>
                    <div class="sheet-label sheet-inventory-bulk">Bulk</div>
                </div>
                <fieldset class="repeating_inventory">
                    <div class="sheet-flex-row sheet-inventory-line">
                        <div><input type="text" name="attr_inventoryquantity" /></div>
                        <div><input type="text" name="attr_inventoryname" /></div>
                        <div><input type="text" name="attr_inventorybulk" /></div>
                    </div>
                </fieldset>
                <div class="sheet-flex-row sheet-inventory-total">
                    <div>Total Inventory Bulk</div>
                    <span>9</span>
                </div>
            </div>
        </div>
	</div>
    <!-- right col -->
	<div class="col">
        <!-- Defences -->
		<div class="sheet-section-banner">
            <div class="sheet-section-banner-label">
                Defences
            </div>
        </div>
        <!-- Condition -->
        <div class="sheet-section-banner">
            <div class="sheet-section-banner-label">
                Condition
            </div>
        </div>
        <!-- Feats -->
        <div class="sheet-section-banner">
            <div class="sheet-section-banner-label">
                Feats
            </div>
        </div>
        <div class="sheet-section-border">
            <div class="sheet-section-feats">
                <fieldset class="repeating_feats">
                    <div class="sheet-flex-row">
                        <div><input type="text" name="attr_featsname" /></div>
                        <div><input type="text" name="attr_featsdescription" /></div>
                    </div>
                </fieldset>
            </div>
        </div>
        <!-- Talents -->
        <div class="sheet-section-banner">
            <div class="sheet-section-banner-label">
                Talents
            </div>
        </div>
        <div class="sheet-section-border">
            <div class="sheet-section-talents">
                <fieldset class="repeating_talents">
                    <div class="sheet-flex-row">
                        <div><input type="text" name="attr_talentsname" /></div>
                        <div><input type="text" name="attr_talentsdescription" /></div>
                    </div>
                </fieldset>
            </div>
        </div>

	</div>

</div>


<script type="text/javascript"> //type="text/worker"
    
    ['strength','agility','constitution','intelligence','wisdom','charisma'].forEach(attr => {
        on(`change:${attr}_base change:${attr}_bonus`, function() {
            update_attr(`${attr}`);
        });
    });

    ['strength','agility','constitution','intelligence','wisdom','charisma'].forEach(attr => {
        on(`change:${attr}`, function() {
            update_mod(`${attr}`);
        });
    });

    var update_mod = function (attr) {
        getAttrs([attr], function(v) {
            var attr_abr = attr.substring(0,3);
            var finalattr = v[attr] && isNaN(v[attr]) === false ? Math.floor((parseInt(v[attr], 10) - 10) / 2) : 0;
            var update = {};
            update[attr + "_mod"] = finalattr;
            update["npc_" + attr_abr + "_negative"] = v[attr] && !isNaN(v[attr]) && parseInt(v[attr], 10) < 10 ? 1 : 0;
            setAttrs(update);
        });
    };

</script>